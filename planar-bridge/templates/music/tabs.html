{% let query_string = target.to_query_string() %}
{% let unselected_css = "tab-button-unselected" %}
{% let now_css %}
{% let queue_css %}
{% match tab %}
  {% when Tab::Now %}
    {% let now_css = "bottom-left-glow" %}
    {% let queue_css = unselected_css %}
  {% when Tab::Queue %}
    {% let now_css = unselected_css %}
    {% let queue_css = "bottom-right-glow" %}
{% endmatch %}
<div class="tab-buttons">
    <button
      class="{{ now_css }}"
      hx-get="/music/tabs/now?{{ query_string }}">
      Up Next
    </button>
    <button
      class="{{ queue_css }}"
      hx-get="/music/tabs/queue?{{ query_string }}">
      Request a Song
    </button>
</div>

{% match tab %}
  {% when Tab::Now %}
      <div class="tab-now">
        <ul
          id="search-results"
          hx-get="/music/now?{{ query_string }}"
          hx-trigger="load, every 10s"
          hx-target="this"
        >
          <div class="lds-ripple"><div></div><div></div></div>
        </ul>
      </div>
  {% when Tab::Queue %}
      <div class="tab-queue">
        <input class="top-glow"
               type="search"
               name="search"
               placeholder="song name or youtube link"
               hx-post="/music/search?{{ query_string }}"
               hx-trigger="load, input changed delay:100ms, search"
               hx-target="#search-results">
        <p id="queuing" class="htmx-indicator">queueing...</p>
        <ul class="justify-center text-surface dark:text-white" id="search-results">
          <div class="lds-ripple"><div></div><div></div></div>
        </ul>
      </div>
{% endmatch %}
